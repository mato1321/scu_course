# é¸ä¿®æˆ°å£«ðŸ¦¸ (æ±å³å¤§å­¸èª²ç¨‹é¤˜é¡æŸ¥è©¢æ©Ÿå™¨äºº)

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-3.1.1-green.svg)](https://flask.palletsprojects.com/)
[![LINE Bot SDK](https://img.shields.io/badge/LINE%20Bot%20SDK-3.17.1-00C300.svg)](https://github.com/line/line-bot-sdk-python)

é€™æ˜¯ä¸€å€‹æ±å³å¤§å­¸å­¸ç”Ÿå°ˆå±¬çš„linebotæ‡‰ç”¨ç¨‹å¼ï¼Œèƒ½å¤ å³æ™‚ç›£æŽ§èª²ç¨‹é¤˜é¡ç‹€æ³ã€‚ç³»çµ±æœƒè‡ªå‹•è¿½è¹¤èª²ç¨‹é¸èª²ç‹€æ…‹ï¼Œä¸¦åœ¨æœ‰åé¡æ™‚ç«‹å³ç™¼é€é€šçŸ¥è¨Šæ¯ã€‚

**ç¹é«”ä¸­æ–‡** | [English](README.md)

## æ ¸å¿ƒåŠŸèƒ½

-  **å³æ™‚èª²ç¨‹æŸ¥è©¢**ï¼šä½¿ç”¨4ä½æ•¸èª²ç¨‹ç·¨è™Ÿå¿«é€ŸæŸ¥è©¢èª²ç¨‹è©³ç´°è³‡è¨Š
-  **æ™ºæ…§åž‹è‡ªå‹•ç›£æŽ§**ï¼šè‡ªå‹•ç›£æŽ§ç„¡åé¡èª²ç¨‹ï¼Œæœ‰ç©ºä½æ™‚ç«‹å³é€šçŸ¥
-  **å®Œæ•´ç®¡ç†ä»‹é¢**ï¼šæŸ¥çœ‹ã€æ–°å¢žã€ç§»é™¤ç›£æŽ§æ¸…å–®ä¸­çš„èª²ç¨‹
-  **å³æ™‚æŽ¨æ’­é€šçŸ¥**ï¼šé€éŽ LINE è¨Šæ¯åœ¨ç¬¬ä¸€æ™‚é–“æ”¶åˆ°é¤˜é¡é€šçŸ¥
- ï¸ **è³‡æºç®¡ç†**ï¼šé™åˆ¶æ¯ä½ä½¿ç”¨è€…æœ€å¤šç›£æŽ§10é–€èª²ç¨‹ï¼Œä¸¦ä½¿ç”¨åŸ·è¡Œç·’å®‰å…¨æ©Ÿåˆ¶
-  **å®¹éŒ¯è™•ç†**ï¼šè‡ªå‹•é‡è©¦æ©Ÿåˆ¶èˆ‡éŒ¯èª¤æ¢å¾©åŠŸèƒ½
- **å®šæœŸæ¸…ç†ç›£æŽ§**ï¼šé–‹å­¸å¾Œè‡ªå‹•åˆªé™¤ç›£æŽ§èª²ç¨‹

##  ç³»çµ±æž¶æ§‹

### æ ¸å¿ƒå…ƒä»¶

- **CourseQuery é¡žåˆ¥**ï¼šè™•ç†æ±å³å¤§å­¸ç³»çµ±é©—è­‰èˆ‡èª²ç¨‹è³‡æ–™æ“·å–
- **ç›£æŽ§å¼•æ“Ž**ï¼šå¤šåŸ·è¡Œç·’èƒŒæ™¯ç›£æŽ§ï¼Œæ¯3ç§’æª¢æŸ¥ä¸€æ¬¡èª²ç¨‹ç‹€æ³
- **LINE Bot æ•´åˆ**ï¼šWebhook è™•ç†èˆ‡æŽ¨æ’­é€šçŸ¥å‚³é€
- **Flask Web æœå‹™**ï¼šRESTful API ç«¯é»žèˆ‡å¥åº·ç›£æŽ§å„€è¡¨æ¿
- **å¾Œç«¯æ¡†æž¶**ï¼šFlask 3.1.1
- **ç¶²é çˆ¬èŸ²**ï¼šrequests 2.32.4 + BeautifulSoup 4.13.4
- **è¨Šæ¯å¹³å°**ï¼šLINE Bot SDK 3.17.1
- **ä¸¦ç™¼è™•ç†**ï¼šPython threading é…åˆåŸ·è¡Œç·’å®‰å…¨éŽ–
- **è³‡æ–™è§£æž**ï¼šæ­£è¦è¡¨ç¤ºå¼ + DOM è§£æž
- **ç’°å¢ƒç®¡ç†**ï¼špython-dotenv 1.0.0

## å¦‚ä½•è‡ªè¡Œä½¿ç”¨

### ä½¿ç”¨æ–¹å¼é¸æ“‡

**æ–¹æ³•ä¸€ï¼šæœ¬åœ°é–‹ç™¼**
- éœ€è¦å®‰è£ Python ç’°å¢ƒ
- ä½¿ç”¨ ngrok å»ºç«‹é€£æŽ¥é€šé“
- é©åˆé–‹ç™¼å’Œæ¸¬è©¦éšŽæ®µ

**æ–¹æ³•äºŒï¼šé›²ç«¯éƒ¨ç½²**
- ç„¡éœ€æœ¬åœ°ç’°å¢ƒï¼Œ24å°æ™‚é‹è¡Œ
- ä½¿ç”¨ Railway å…è²»éƒ¨ç½²
- é©åˆæ­£å¼é‹è¡Œå’Œé•·æœŸç›£æŽ§

### ç’°å¢ƒéœ€æ±‚ (æœ¬åœ°é–‹ç™¼)

- **Python 3.7+** ä¸¦å®‰è£ pip å¥—ä»¶ç®¡ç†å™¨
- **LINE Bot é »é“** (Channel Access Token èˆ‡ Channel Secret)
- **æ±å³å¤§å­¸å¸³è™Ÿ** (å­¸ç”Ÿèªè­‰è³‡æ–™)
- **ngrok** ç”¨æ–¼localé–‹ç™¼æ™‚çš„HTTPSé€£æŽ¥é€šé“

### å®‰è£æŒ‡å— (æœ¬åœ°é–‹ç™¼)

1. **è¤‡è£½å„²å­˜åº«**
```bash
git clone https://github.com/yourusername/soochow-course-bot.git
cd soochow-course-bot
```

2. **å»ºç«‹è™›æ“¬ç’°å¢ƒ (å»ºè­°)**
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ–
venv\Scripts\activate     # Windows
```

3. **å®‰è£ç›¸ä¾æ€§å¥—ä»¶**
```bash
pip install -r requirements.txt
```

4. **ç’°å¢ƒè®Šæ•¸è¨­å®š**

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` æª”æ¡ˆï¼š
```env
LINE_CHANNEL_ACCESS_TOKEN=ä½ çš„_line_channel_access_token
LINE_CHANNEL_SECRET=ä½ çš„_line_channel_secret
SOOCHOW_USERNAME=ä½ çš„_æ±å³å¤§å­¸å­¸è™Ÿ
SOOCHOW_PASSWORD=ä½ çš„_æ±å³å¤§å­¸å¯†ç¢¼
```

5. **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**
```bash
python main.py
```

æœå‹™å°±å¯ä»¥åœ¨ `http://localhost:5000` ä¸Šé‹è¡Œ

##  ngrok è¨­å®šèˆ‡æ•´åˆ

### å®‰è£ ngrok

1. **ä¸‹è¼‰ ngrok**
   - å‰å¾€ [ngrok.com](https://ngrok.com/) ä¸¦å»ºç«‹å…è²»å¸³è™Ÿ
   - ä¸‹è¼‰é©ç”¨æ–¼æ‚¨ä½œæ¥­ç³»çµ±çš„ç‰ˆæœ¬

2. **èªè­‰è¨­å®š**
```bash
ngrok authtoken æ‚¨çš„_èªè­‰_TOKEN
```

### é€£æŽ¥é€šé“è¨­å®š

1. **å•Ÿå‹•æ‚¨çš„ Flask æ‡‰ç”¨ç¨‹å¼**
```bash
python main.py
```

2. **å»ºç«‹ HTTP é€£æŽ¥é€šé“ (é–‹æ–°çµ‚ç«¯æ©Ÿ)**
```bash
ngrok http 5000
```

3. **è¤‡è£½ HTTPS ç¶²å€ (Forwardingé‚£è¡Œ)**
```
ngrok by @inconshreveable

Session Status    online
Account           your_account (Plan: Free)
Version           2.3.40
Region            United States (us)
Web Interface     http://127.0.0.1:4040
Forwarding        http://abc123.ngrok.io -> http://localhost:5000
Forwarding        https://abc123.ngrok.io -> http://localhost:5000  <-- ä½¿ç”¨æ­¤ç¶²å€
```

### LINE Bot Webhook è¨­å®š

1. **å‰å¾€ LINE Developers Console**
   - åˆ° [developers.line.biz](https://developers.line.biz/)
   - é¸æ“‡æ‚¨çš„é »é“

2. **æ›´æ–° Webhook ç¶²å€**
   - å°Žè¦½è‡³ **Messaging API** åˆ†é 
   - è¨­å®š **Webhook URL**ï¼š`https://abc123.ngrok.io/callback` **(è¨˜å¾—è¦åŠ /callback)**
   - å•Ÿç”¨ **Use webhook**
   - é»žæ“Š **Verify** æ¸¬è©¦é€£ç·š

3. **æ¸¬è©¦æ‚¨çš„æ©Ÿå™¨äºº**
   - ä½¿ç”¨ QR code åŠ å…¥æ©Ÿå™¨äººç‚ºå¥½å‹
   - ç™¼é€æ¸¬è©¦è¨Šæ¯

## é›²ç«¯éƒ¨ç½²æ–¹å¼ 

### é›²ç«¯éƒ¨ç½²éœ€æ±‚

- **GitHub å¸³è™Ÿ** (å…è²»è¨»å†Š)
- **Railway å¸³è™Ÿ** (å…è²»è¨»å†Šï¼šhttps://railway.app)
- **LINE Bot é »é“è³‡è¨Š** (åŒæœ¬åœ°é–‹ç™¼)
- **æ±å³å¤§å­¸å¸³è™Ÿ** (åŒæœ¬åœ°é–‹ç™¼)

### Railway éƒ¨ç½²æ­¥é©Ÿ

#### æ­¥é©Ÿ 1: æº–å‚™ç¨‹å¼ç¢¼

1. **å»ºç«‹ GitHub Repository**
   - å‰å¾€ https://github.com ä¸¦ç™»å…¥
   - é»žæ“Š "New repository"
   - Repository åç¨±ï¼š`soochow-course-bot`
   - è¨­ç‚º Public æˆ– Private
   - é»žæ“Š "Create repository"

2. **ä¸Šå‚³ç¨‹å¼ç¢¼åˆ° GitHub**
   - ä¸‹è¼‰å°ˆæ¡ˆæª”æ¡ˆ
   - ä¸Šå‚³æ‰€æœ‰æª”æ¡ˆåˆ° GitHub (é™¤äº† .env æª”æ¡ˆ)

#### æ­¥é©Ÿ 2: Railway éƒ¨ç½²

1. **ç™»å…¥ Railway**
   - å‰å¾€ https://railway.app
   - ä½¿ç”¨ GitHub å¸³è™Ÿç™»å…¥

2. **å»ºç«‹æ–°å°ˆæ¡ˆ**
   - é»žæ“Š "New Project"
   - é¸æ“‡ "Deploy from GitHub repo"
   - é¸æ“‡ä½ çš„ Repository
   - é»žæ“Š "Deploy Now"

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   - åœ¨ Railway Dashboard é»žæ“Šä½ çš„å°ˆæ¡ˆ
   - é€²å…¥ "Variables" åˆ†é 
   - æ–°å¢žä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š
     ```
     LINE_CHANNEL_ACCESS_TOKEN=ä½ çš„_LINE_Token
     LINE_CHANNEL_SECRET=ä½ çš„_LINE_Secret
     SOOCHOW_USERNAME=ä½ çš„æ±å³å­¸è™Ÿ
     SOOCHOW_PASSWORD=ä½ çš„æ±å³å¯†ç¢¼
     ```

#### æ­¥é©Ÿ 3: è¨­å®š LINE Webhook

1. **å–å¾— Railway ç¶²å€**
   - åœ¨å°ˆæ¡ˆè¨­å®šä¸­é»žæ“Š "Generate Domain"
   - è¤‡è£½ç¶²å€ (ä¾‹å¦‚ï¼š`https://your-app.up.railway.app`)

2. **æ›´æ–° LINE Bot è¨­å®š**
   - å‰å¾€ LINE Developers Console
   - è¨­å®š Webhook URLï¼š`https://your-app.up.railway.app/callback`
   - å•Ÿç”¨ "Use webhook" ä¸¦é©—è­‰

## æ©Ÿå™¨äººæŒ‡ä»¤èˆ‡ä½¿ç”¨æ–¹å¼

### å¯ç”¨æŒ‡ä»¤

| æŒ‡ä»¤ | èªªæ˜Ž | ç¯„ä¾‹ |
|------|------|------|
| `[4ä½æ•¸ç·¨è™Ÿ]` | æŸ¥è©¢èª²ç¨‹ä¸¦åœ¨ç„¡åé¡æ™‚è‡ªå‹•ç›£æŽ§ | `7002` |
| `æ¸…å–®` | æŸ¥çœ‹ç›®å‰ç›£æŽ§æ¸…å–® | `æ¸…å–®` |
| `å–æ¶ˆ [èª²ç¨‹ç·¨è™Ÿ]` | å–æ¶ˆç›£æŽ§ç‰¹å®šèª²ç¨‹ | `å–æ¶ˆ 7002` |
| `å–æ¶ˆ å…¨éƒ¨` | å–æ¶ˆæ‰€æœ‰ç›£æŽ§ | `å–æ¶ˆ å…¨éƒ¨` |
| `å¹«åŠ©` | é¡¯ç¤ºä½¿ç”¨èªªæ˜Ž | `å¹«åŠ©` |

### å·¥ä½œæµç¨‹

1. **èª²ç¨‹æŸ¥è©¢**ï¼šç™¼é€4ä½æ•¸èª²ç¨‹ç·¨è™Ÿçµ¦æ©Ÿå™¨äºº
2. **è‡ªå‹•ç›£æŽ§**ï¼šç³»çµ±è‡ªå‹•ç›£æŽ§ç„¡é¤˜é¡çš„èª²ç¨‹
3. **å³æ™‚é€šçŸ¥**ï¼šæœ‰é¤˜é¡æ™‚é€éŽ LINE æ”¶åˆ°é€šçŸ¥
4. **è‡ªå‹•æ¸…ç†**ï¼šæˆåŠŸé€šçŸ¥å¾Œè‡ªå‹•åœæ­¢ç›£æŽ§

### å›žæ‡‰ç¯„ä¾‹

**æœ‰é¤˜é¡ï¼š**
```
èª²ç¨‹åç¨±ï¼šè³‡æ–™çµæ§‹
é¸èª²ç·¨è™Ÿï¼š7002
ç§‘ç›®ä»£ç¢¼ï¼šCSIE2001
å­¸åˆ†æ•¸ï¼š3
ä¿®èª²äººæ•¸ï¼š45/60
å‰©é¤˜åé¡ï¼š15 äºº
(ç›®å‰æœ‰15å€‹åé¡ï¼Œè«‹ç›¡å¿«åŽ»åŠ é¸!)
```

**ç„¡é¤˜é¡ï¼ˆè‡ªå‹•ç›£æŽ§å•Ÿå‹•ï¼‰ï¼š**
```
æˆåŠŸåŠ å…¥ç›£æŽ§æ¸…å–®!
èª²ç¨‹åç¨±ï¼šè³‡æ–™çµæ§‹
é¸èª²ç·¨è™Ÿï¼š7002
ç§‘ç›®ä»£ç¢¼ï¼šCSIE2001
å­¸åˆ†æ•¸ï¼š3
ä¿®èª²äººæ•¸ï¼š60/60
å‰©é¤˜åé¡ï¼š0 äºº
(ç›®å‰æ²’æœ‰åé¡ï¼Œç•¶æœ‰åé¡æ™‚æœƒç”±lineä¸»å‹•é€šçŸ¥)
```

### ç³»çµ±åƒæ•¸

```python
MONITOR_INTERVAL = 3              # ç›£æŽ§é–“éš”ï¼ˆç§’ï¼‰
MAX_MONITORING_PER_USER = 10      # æ¯ç”¨æˆ¶æœ€å¤§ç›£æŽ§èª²ç¨‹æ•¸
REQUEST_TIMEOUT = 30              # HTTP è«‹æ±‚è¶…æ™‚æ™‚é–“
PORT = 5000                       # Flask ä¼ºæœå™¨åŸ è™Ÿ
```

### é™¤éŒ¯

**å•Ÿç”¨é™¤éŒ¯æ¨¡å¼**
```python
DEBUG_MODE = True
app.run(host='0.0.0.0', port=5000, debug=True)
```

**æ—¥èªŒåˆ†æž**
ç³»çµ±è¼¸å‡ºè©³ç´°çš„åŸ·è¡Œæ—¥èªŒï¼š
- èªè­‰ç‹€æ…‹
- èª²ç¨‹æŸ¥è©¢çµæžœ
- ç›£æŽ§ç‹€æ…‹è®ŠåŒ–
- éŒ¯èª¤è¨Šæ¯èˆ‡å †ç–Šè¿½è¹¤

## å…è²¬è²æ˜Ž

æ­¤æ©Ÿå™¨äººåƒ…ä¾›**æ•™è‚²å’Œå€‹äººä½¿ç”¨**ã€‚ä½¿ç”¨è€…å¿…é ˆéµå®ˆæ±å³å¤§å­¸çš„æœå‹™æ¢æ¬¾å’Œç›¸é—œè¦å®šã€‚

é–‹ç™¼è€…å°ä»»ä½•èª¤ç”¨æˆ–é•è¦è¡Œç‚ºä¸æ‰¿æ“”è²¬ä»»ã€‚

---

ç‚ºæ±å³å¤§å­¸å­¸ç”Ÿè£½ä½œ(å¦‚æœ‰å•é¡Œæ­¡è¿Žç§è¨Šå•æˆ‘ï¼Œæˆ‘æœƒç›¡é‡å›žç­”!)